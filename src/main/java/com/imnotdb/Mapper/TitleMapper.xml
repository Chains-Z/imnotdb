<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD com.imnotdb.Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.imnotdb.Mapper.TitleMapper">
    <select id="getTitleBasicByTconst" resultType="title">
        SELECT *
        FROM title_basics
        WHERE tconst = #{tconst};
    </select>

    <select id="getTitleBasicByAdult" resultType="title">
        SELECT *
        FROM title_basics
        WHERE isAdult = #{adult};
    </select>

    <select id="getTitleBasicByGenres" resultType="title">
        SELECT *
        FROM title_basics
        WHERE MATCH(genres) AGAINST(#{genres});
    </select>

    <select id="getTitleBasicByType" resultType="title">
        SELECT *
        FROM title_basics
        WHERE titleType=#{type};
    </select>
    <select id="getTitleBasicByLen" resultType="title">
        SELECT *
        FROM title_basics
        WHERE runtimeMinutes BETWEEN #{from} AND #{to};
    </select>
    <select id="getTitleBasicByRating" resultType="title">
        SELECT *
        FROM title_basics
        WHERE tconst IN (SELECT tconst
        FROM ratings
        WHERE averageRating BETWEEN #{from} AND #{to});
    </select>
</mapper>
